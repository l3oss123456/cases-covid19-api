{"version":3,"sources":["../src/index.js"],"names":["app","Koa","use","server","listen","config","PORT","console","log","options","useNewUrlParser","useUnifiedTopology","country","lastdays","setInterval","resp"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;;;;;;;AAEA,IAAMA,GAAG,GAAG,IAAIC,eAAJ,EAAZ;AACAD,GAAG,CAACE,GAAJ,CAAQ,gCAAR;AACAF,GAAG,CAACE,GAAJ,CAAQ,uBAAR,E,CAEA;AACA;;AAEA,IAAMC,MAAM,GAAGH,GAAG,CAACI,MAAJ,CAAWC,mBAAOC,IAAlB,EAAwB,YAAM;AAC3CC,EAAAA,OAAO,CAACC,GAAR,uCAA2CH,mBAAOC,IAAlD;AACD,CAFc,CAAf;AAIA,IAAMG,OAAO,GAAG;AACdC,EAAAA,eAAe,EAAE,IADH;AAEdC,EAAAA,kBAAkB,EAAE;AAFN,CAAhB,C,CAIA;AACA;;AAEA,IAAMC,OAAO,GAAG,CACd,KADc,EAEd,OAFc,EAGd,OAHc,EAId,SAJc,EAKd,QALc,EAMd,IANc,EAOd,QAPc,EAQd,SARc,EASd,aATc,EAUd,QAVc,CAAhB;AAYA,IAAIC,QAAQ,GAAG,CAAf;AAEAC,WAAW,uEAAC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACS,qCAAyBF,OAAzB,EAAkCC,QAAlC,CADT;;AAAA;AACJE,UAAAA,IADI;AAEV,sCAAcA,IAAd;AACAF,UAAAA,QAAQ,GAAGA,QAAQ,GAAG,CAAtB;;AACA,cAAIA,QAAQ,GAAG,EAAf,EAAmB;AACjBA,YAAAA,QAAQ,GAAG,CAAX;AACD;;AANS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAD,IAOR,IAPQ,CAAX,C,CASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;eAEeV,M","sourcesContent":["import Koa from \"koa\"\r\nimport bodyParser from \"koa-bodyparser\"\r\nimport cors from \"@koa/cors\"\r\nimport mongoose from \"mongoose\"\r\nimport { load } from \"koa-decorator\"\r\nimport path from \"path\"\r\nimport { broadcastData } from \"./utils/domains\"\r\nimport { list_covid19_all_country } from \"./domains/covid19/index\"\r\n\r\nimport config from \"./config/index\"\r\n\r\nconst app = new Koa()\r\napp.use(bodyParser())\r\napp.use(cors())\r\n\r\n// const apiRouter = load(path.resolve(__dirname, \"controllers\"), \".controller.js\")\r\n// app.use(apiRouter.routes())\r\n\r\nconst server = app.listen(config.PORT, () => {\r\n  console.log(`Server is running on port : ${config.PORT}`)\r\n})\r\n\r\nconst options = {\r\n  useNewUrlParser: true,\r\n  useUnifiedTopology: true,\r\n}\r\n// mongoose.connect(\"mongodb://localhost:27017/covid19\", options)\r\n// mongoose.connect(\"cluster0-shard-00-00.yyndl.mongodb.net:27017\", options)\r\n\r\nconst country = [\r\n  \"USA\",\r\n  \"Spain\",\r\n  \"Italy\",\r\n  \"Germany\",\r\n  \"France\",\r\n  \"UK\",\r\n  \"Russia\",\r\n  \"Belgium\",\r\n  \"Netherlands\",\r\n  \"Brazil\",\r\n]\r\nlet lastdays = 1\r\n\r\nsetInterval(async () => {\r\n  const resp = await list_covid19_all_country(country, lastdays)\r\n  broadcastData(resp)\r\n  lastdays = lastdays + 1\r\n  if (lastdays > 30) {\r\n    lastdays = 1\r\n  }\r\n}, 3000)\r\n\r\n// test()\r\n// async function test() {\r\n//   const resp = await list_covid19_all_country(country, lastdays)\r\n//   broadcastData(resp)\r\n//   lastdays = lastdays + 1\r\n//   if (lastdays > 30) {\r\n//     lastdays = 1\r\n//   }\r\n// }\r\n\r\nexport default server\r\n"],"file":"index.js"}